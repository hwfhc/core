/*! hwfhc */
/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 8);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var Token = function () {
    function Token(value) {
        _classCallCheck(this, Token);

        this.value = value;
    }

    _createClass(Token, [{
        key: "match",
        value: function match(tokenStream) {
            var tok = tokenStream.peek();
            if (!tok) return new Error("no tok rest");

            if (isSameToken(this, tok)) {
                tokenStream.next();
                return tok;
            } else {
                var errMessage = tok.value;

                if (tokenStream.peek(2)) errMessage += tokenStream.peek(2).value;
                if (tokenStream.peek(3)) errMessage += tokenStream.peek(3).value;

                return new Error("not match in " + errMessage);
            }
        }
    }, {
        key: "eval",
        value: function _eval() {
            return this.value;
        }
    }]);

    return Token;
}();

function isSameToken(tok1, tok2) {
    if (tok1.__proto__ === tok2.__proto__) return true;else return false;
}

module.exports = Token;

/***/ }),
/* 1 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Sep = __webpack_require__(2);

var Punc = function (_Sep) {
    _inherits(Punc, _Sep);

    function Punc(value) {
        _classCallCheck(this, Punc);

        return _possibleConstructorReturn(this, (Punc.__proto__ || Object.getPrototypeOf(Punc)).call(this, value));
    }

    return Punc;
}(Sep);

Punc.MATCH = /^(\(|\)|,|\.)/;

module.exports = Punc;

/***/ }),
/* 2 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Token = __webpack_require__(0);

var Sep = function (_Token) {
    _inherits(Sep, _Token);

    function Sep(value) {
        _classCallCheck(this, Sep);

        return _possibleConstructorReturn(this, (Sep.__proto__ || Object.getPrototypeOf(Sep)).call(this, value));
    }

    _createClass(Sep, [{
        key: 'match',
        value: function match(tokenStream) {
            var tok = tokenStream.peek();

            if (isValueEqual(this, tok) && isInheritedSep(tok)) {
                tokenStream.next();
                return tok;
            } else {
                var errMessage = tok.value;

                if (tokenStream.peek(2)) errMessage += tokenStream.peek(2).value;
                if (tokenStream.peek(3)) errMessage += tokenStream.peek(3).value;

                return new Error('not match in ' + errMessage);
            }
        }
    }]);

    return Sep;
}(Token);

function isValueEqual(tok1, tok2) {
    return tok1.value === tok2.value;
}

function isInheritedSep(tok) {
    var tem = tok.__proto__;

    while (tem) {
        if (tem.__proto__ === Sep.prototype) return true;
        tem = tem.__proto__;
    }

    return false;
}

module.exports = Sep;

/***/ }),
/* 3 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var call = __webpack_require__(9);
var scope = __webpack_require__(10);

module.exports = {
    call: call, scope: scope
};

/***/ }),
/* 4 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Token = __webpack_require__(0);
var ENV = __webpack_require__(3);

var Ident = function (_Token) {
    _inherits(Ident, _Token);

    function Ident(value) {
        _classCallCheck(this, Ident);

        return _possibleConstructorReturn(this, (Ident.__proto__ || Object.getPrototypeOf(Ident)).call(this, value));
    }

    _createClass(Ident, [{
        key: 'eval',
        value: function _eval() {
            return ENV.scope.get(this.value);
        }
    }]);

    return Ident;
}(Token);

Ident.MATCH = /^[a-zA-Z_]+/;

module.exports = Ident;

/***/ }),
/* 5 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Token = __webpack_require__(0);

var Num = function (_Token) {
    _inherits(Num, _Token);

    function Num(value) {
        _classCallCheck(this, Num);

        return _possibleConstructorReturn(this, (Num.__proto__ || Object.getPrototypeOf(Num)).call(this, value));
    }

    return Num;
}(Token);

Num.MATCH = /^[0-9]+/;

module.exports = Num;

/***/ }),
/* 6 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Punc = __webpack_require__(1);

var Quo = function (_Punc) {
    _inherits(Quo, _Punc);

    function Quo() {
        _classCallCheck(this, Quo);

        return _possibleConstructorReturn(this, (Quo.__proto__ || Object.getPrototypeOf(Quo)).call(this, '`'));
    }

    return Quo;
}(Punc);

Quo.MATCH = /^(`)/;

module.exports = Quo;

/***/ }),
/* 7 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Token = __webpack_require__(0);

var Html = function (_Token) {
    _inherits(Html, _Token);

    function Html(value) {
        _classCallCheck(this, Html);

        return _possibleConstructorReturn(this, (Html.__proto__ || Object.getPrototypeOf(Html)).call(this, value));
    }

    return Html;
}(Token);

Html.MATCH = /^[^(`|{{|}})]+/;

module.exports = Html;

/***/ }),
/* 8 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


(function () {
    var ENV = __webpack_require__(3);
    var scope = ENV.scope;
    var compiler = __webpack_require__(11);

    var dp_component = document.getElementsByClassName('dp-component');
    var dp_dynamic = document.getElementsByClassName('dp-dynamic');
    var dp_for = document.getElementsByClassName('dp-for');
    var dp_if = document.getElementsByClassName('dp-if');

    (function initComponent() {
        var elements = dp_component;

        var _loop = function _loop() {
            var name = dp_component[i].tagName.toLowerCase();

            getDataWithAJAX('GET', '/components/' + name, dp_component[i], function (data, component) {
                data += '<link href="/components/' + name + '/index.css" rel="stylesheet" type="text/css" />';
                component.innerHTML = data;
            });
        };

        for (var i = 0; i < elements.length; i++) {
            _loop();
        }
    })();

    (function initDynamic() {
        var elements = dp_dynamic;

        var _loop2 = function _loop2(i) {
            var node = elements[i];
            var html = elements[i].innerHTML;
            var name = elements[i].getAttribute('dp-name');
            var data = elements[i].getAttribute('dp-data');

            if (data) {
                new Promise(function (resolve, reject) {
                    compiler(data, function (err, result) {
                        scope.set(name, JSON.parse(result));
                        resolve(result);
                    });
                }).then(function (result) {
                    return compiler(html, function (result) {
                        removeTag(node);
                        node.innerHTML = result;
                    });
                });
            } else {
                compiler(html, function (err, result) {
                    removeTag(node);
                    node.innerHTML = result;
                });
            }
        };

        for (var i = 0; i < elements.length; i++) {
            _loop2(i);
        }
    })();

    (function initFor() {
        var elements = dp_for;

        var _loop3 = function _loop3(_i) {
            var parent = elements[_i].parentNode;
            var last = elements[_i].nextSibling;
            var node = elements[_i];
            var html = node.innerHTML;
            var data = node.getAttribute('dp-data');

            parent.removeChild(node);
            _i--;

            new Promise(function (resolve, reject) {
                compiler(data, function (err, result) {
                    scope.set('tem', JSON.parse(result));
                    removeTag(node);

                    resolve(result);
                });
            }).then(function (result) {

                var length = JSON.parse(result).length;

                for (var j = 0; j < length; j++) {
                    scope.setItem();
                    compiler(html, function (err, result) {
                        var child = node.cloneNode(true);
                        child.innerHTML = result;

                        parent.insertBefore(child, last);
                    });
                }
            });
            i = _i;
        };

        for (var i = 0; i < elements.length; i++) {
            _loop3(i);
        }
    })();

    (function initIf() {
        var elements = dp_if;

        var _loop4 = function _loop4(_i2) {
            var node = elements[_i2];
            var bool = node.getAttribute('dp-var');

            compiler(bool, function (err, result) {
                if (result === 'false') node.parentNode.removeChild(node);
            });
        };

        for (var _i2 = 0; _i2 < elements.length; _i2++) {
            _loop4(_i2);
        }
    })();

    function removeTag(item) {
        item.removeAttribute('dp-name');
        item.removeAttribute('dp-data');
        item.removeAttribute('dp-var');
    }

    function getDataWithAJAX(method, url, element, callback) {
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function () {
            if (this.readyState == 4 && this.status == 200) {
                callback(this.responseText, element);
            }
        };
        xhttp.open(method, url, true);
        xhttp.send();
    }
})();

/***/ }),
/* 9 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


module.exports = call;

function call(func, arg, callback) {
    return func.call(this, arg);
}

/***/ }),
/* 10 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


module.exports = {
    set: set,
    get: get,
    getChild: getChild,
    setItem: setItem,
    getItem: getItem,
    getTem: getTem,

    getItemChild: getItemChild
};

var scope = {
    bool: '123',
    tem: [],
    item: {},
    ajax: async function ajax(url) {
        return await sendReq(url);
    },
    getPathname: function getPathname(number, callback) {
        callback(window.location.pathname.split('/')[number]);
    }
};

function set() {
    var ident = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : undefined;
    var value = arguments[1];

    scope[ident] = value;
}

function get(ident) {
    return scope[ident];
}

function getTem() {
    return scope.tem;
}

function getItem(ident) {
    return scope.item;
}

function getChild(ident, child) {
    return scope[ident][child];
}

function getItemChild(child) {
    return scope.item[child];
}

function setItem() {
    scope.item = scope['tem'].splice(0, 1)[0];
}

function sendReq(url) {
    return new Promise(function (resolve, reject) {

        var xmlhttp = new XMLHttpRequest();

        xmlhttp.onreadystatechange = function () {
            if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                resolve(xmlhttp.responseText);
            }
        };

        xmlhttp.open("GET", url, true);
        xmlhttp.send();
    });
}

/***/ }),
/* 11 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var ENV = __webpack_require__(3);

var rule = __webpack_require__(12);
var tokenStream = __webpack_require__(17);

var Ident = __webpack_require__(4);
var Punc = __webpack_require__(1);
var Num = __webpack_require__(5);
var Sep = __webpack_require__(2);
var Html = __webpack_require__(7);

var ident = new Ident();
var num = new Num();
var html = new Html();

var dot = rule('dot').ast(ident).repeat([sep('.'), ident]).setEval(function () {
    if (this.getNumberOfChild() === 1) return this.getChild(0).eval();else return ENV.scope.getChild(this.getChild(0).value, this.getChild(1).value);
});

var str = rule('str').sep('`').ast(html).sep('`').setEval(function () {
    return this.getFirstChild().eval();
});
var arg = rule('arg').or([str, dot, num]).setEval(function () {
    return this.getFirstChild().eval();
});

var call = rule('call').ast(ident).sep('(').ast(arg).repeat([sep(','), arg]).sep(')').setEval(function () {
    var func = this.getFirstChild().eval();
    var args = [];

    for (var i = 1; i < this.getNumberOfChild(); i++) {
        var item = this.getChild(i).eval();
        args.push(this.getChild(i).eval());
    }

    return ENV.call(func, args);
});

// stmt : (html) '{{' call '}}' (html)
var stmt = rule('stmt').maybe([html]).sep('{{').or([call, dot]).sep('}}').maybe([html]).setEval(async function () {
    var str = '';

    for (var i = 0; i < this.getChildren().length; i++) {
        str += await this.getChildren()[i].eval();
    }

    return str;
});

function sep(value) {
    return new Sep(value);
}

module.exports = async function (code, callback) {
    var ts = new tokenStream(code);

    if (isError(ts)) {
        callback(ts);
        return;
    }

    var ast = stmt.match(ts);

    if (isError(ast)) {
        callback(ast);
        return;
    }

    callback(null, (await ast.eval()));
};

function isError(obj) {
    return obj.__proto__ === Error.prototype;
}

/***/ }),
/* 12 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var Ident = __webpack_require__(4);
var Punc = __webpack_require__(1);
var Num = __webpack_require__(5);
var Quo = __webpack_require__(6);
var Sep = __webpack_require__(2);

var AST = __webpack_require__(13);
var Repeat = __webpack_require__(14);
var Maybe = __webpack_require__(15);
var Or = __webpack_require__(16);

var Rule = function () {
    function Rule(tag) {
        _classCallCheck(this, Rule);

        this.tag = tag;
        this.eval;

        this.list = [];
    }

    _createClass(Rule, [{
        key: 'ast',
        value: function ast(item) {
            this.list.push(item);

            return this;
        }
    }, {
        key: 'sep',
        value: function sep(str) {
            this.list.push(new Sep(str));

            return this;
        }
    }, {
        key: 'or',
        value: function or(arg) {
            this.list.push(new Or(arg));

            return this;
        }
    }, {
        key: 'repeat',
        value: function repeat(arg) {
            this.list.push(new Repeat(arg));

            return this;
        }
    }, {
        key: 'maybe',
        value: function maybe(arg) {
            this.list.push(new Maybe(arg));

            return this;
        }
    }, {
        key: 'setEval',
        value: function setEval(evaluate) {
            this.eval = evaluate;

            return this;
        }
    }, {
        key: 'match',
        value: function match(tokenStream) {
            var list = this.list;
            var ast = new AST(this.tag, this.eval);

            for (var i = 0; i < list.length; i++) {
                var item = list[i];

                var result = item.match(tokenStream);

                if (isAstOfRepeat(result)) result.forEach(function (item) {
                    return addChildWithoutSep(ast, item);
                });else if (!isError(result)) addChildWithoutSep(ast, result);else return result;
            }

            return ast;
        }
    }]);

    return Rule;
}();

function addChildWithoutSep(ast, item) {
    if (!isSep(item)) ast.addChild(item);
}

function isError(obj) {
    return obj.__proto__ === Error.prototype;
}

function isSep(tok) {
    var tem = tok.__proto__;

    while (tem) {
        if (tem.__proto__ === Sep.prototype) return true;
        tem = tem.__proto__;
    }

    return false;
}

function isAstOfRepeat(obj) {
    return obj.__proto__ === Array.prototype;
}

module.exports = function (arg) {
    return new Rule(arg);
};

/***/ }),
/* 13 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var AST = function () {
    function AST(type, evaluate) {
        _classCallCheck(this, AST);

        this.type = type;
        this.eval = evaluate;

        this.children = [];
    }

    _createClass(AST, [{
        key: "addChild",
        value: function addChild(child) {
            this.children.push(child);
        }
    }, {
        key: "getChild",
        value: function getChild(index) {
            return this.children[index];
        }
    }, {
        key: "getChildren",
        value: function getChildren() {
            return this.children;
        }
    }, {
        key: "getFirstChild",
        value: function getFirstChild() {
            return this.children[0];
        }
    }, {
        key: "getNumberOfChild",
        value: function getNumberOfChild() {
            return this.children.length;
        }
    }]);

    return AST;
}();

module.exports = AST;

/***/ }),
/* 14 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var Repeat = function () {
    /*
     * repeat 0 time or more time
     *
     */
    function Repeat(list) {
        _classCallCheck(this, Repeat);

        this.list = list;
    }

    _createClass(Repeat, [{
        key: "match",
        value: function match(tokenStream) {
            var astArr = [];

            while (1) {
                var result = matchOnce(this.list, tokenStream);

                if (result) insertAtLastOfArr(astArr, result);else break;
            }

            return astArr;
        }
    }]);

    return Repeat;
}();

function matchOnce(list, tokenStream) {
    var rollbackPoint = tokenStream.createRollbackPoint();
    var arrOfResult = [];

    for (var i = 0; i < list.length; i++) {
        var result = list[i].match(tokenStream);

        if (isError(result)) {
            tokenStream.rollback(rollbackPoint);
            return false;
        } else {
            arrOfResult.push(result);
        }
    }

    return arrOfResult;
}

function insertAtLastOfArr(main, arr) {
    for (var i = 0; i < arr.length; i++) {
        main.push(arr[i]);
    }
}

function isError(obj) {
    return obj.__proto__ === Error.prototype;
}

module.exports = Repeat;

/***/ }),
/* 15 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var Maybe = function () {
    function Maybe(list) {
        _classCallCheck(this, Maybe);

        this.list = list;
    }

    _createClass(Maybe, [{
        key: "match",
        value: function match(tokenStream) {
            var astArr = [];

            var result = matchOnce(this.list, tokenStream);

            if (result) insertAtLastOfArr(astArr, result);

            return astArr;
        }
    }]);

    return Maybe;
}();

function matchOnce(list, tokenStream) {
    var rollbackPoint = tokenStream.createRollbackPoint();
    var arrOfResult = [];

    for (var i = 0; i < list.length; i++) {
        var result = list[i].match(tokenStream);

        if (isError(result)) {
            tokenStream.rollback(rollbackPoint);
            return false;
        } else {
            arrOfResult.push(result);
        }
    }

    return arrOfResult;
}

function insertAtLastOfArr(main, arr) {
    for (var i = 0; i < arr.length; i++) {
        main.push(arr[i]);
    }
}

function isError(obj) {
    return obj.__proto__ === Error.prototype;
}

module.exports = Maybe;

/***/ }),
/* 16 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var Or = function () {
    function Or(branch) {
        _classCallCheck(this, Or);

        /*
         * the first branch has the biggest priority
         */
        this.branch = branch;
    }

    _createClass(Or, [{
        key: 'match',
        value: function match(tokenStream) {
            var ast = new Error('not match in ', this);

            this.branch.forEach(function (item) {
                var rollbackPoint = tokenStream.createRollbackPoint();
                var result = item.match(tokenStream);

                if (isError(result)) tokenStream.rollback(rollbackPoint);else ast = result;
            });

            return ast;
        }
    }]);

    return Or;
}();

function isError(obj) {
    return obj.__proto__ === Error.prototype;
}

module.exports = Or;

/***/ }),
/* 17 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var Mode = __webpack_require__(18);

var TokenStream = function () {
    function TokenStream(code) {
        _classCallCheck(this, TokenStream);

        this.index = -1;
        this.stream = scan(code);

        if (isError(this.stream)) return this.stream;
    }

    _createClass(TokenStream, [{
        key: 'next',
        value: function next() {
            this.index++;
            return this.stream[this.index];
        }
    }, {
        key: 'peek',
        value: function peek() {
            var i = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;

            return this.stream[this.index + i];
        }
    }, {
        key: 'createRollbackPoint',
        value: function createRollbackPoint() {
            return {
                index: this.index
            };
        }
    }, {
        key: 'rollback',
        value: function rollback(point) {
            this.index = point.index;
        }
    }]);

    return TokenStream;
}();

function scan(str) {
    var stream = [];
    var mode = new Mode();

    while (str.length > 0) {
        var result = getOneToken();

        if (!result) {
            return new Error('Unexpected token \'' + str + '\'');
        }

        stream.push(result);
    }

    return stream;

    function getOneToken() {
        for (var i = 0; i < mode.getMode().length; i++) {
            var item = mode.getMode()[i];
            var result = str.match(item.MATCH);

            if (!result) continue;

            mode.switch(result[0]);

            str = str.substr(result[0].length);
            return new item(result[0]);
        }
    }
}

function isError(obj) {
    return obj.__proto__ === Error.prototype;
}

module.exports = TokenStream;

/***/ }),
/* 18 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var Token = __webpack_require__(0);

var Num = __webpack_require__(5);
var Ident = __webpack_require__(4);
var Punc = __webpack_require__(1);
var Html = __webpack_require__(7);
var Quo = __webpack_require__(6);
var Code = __webpack_require__(19);

var outCode = [Html, Code];
var inStr = [Html, Quo];
var outStr = [Num, Ident, Quo, Punc, Code];

var Mode = function () {
    function Mode() {
        _classCallCheck(this, Mode);

        this.list = outCode;
    }

    _createClass(Mode, [{
        key: 'getMode',
        value: function getMode() {
            return this.list;
        }
    }, {
        key: 'switch',
        value: function _switch(char) {
            if (char === '{{') this.list = outStr;

            if (char === '}}') this.list = outCode;

            if (char === '`') {
                if (this.list === inStr) this.list = outStr;else this.list = inStr;
            }
        }
    }]);

    return Mode;
}();

function isStrStart(char) {
    var a = char === '`';
    return a;
}

module.exports = Mode;

/***/ }),
/* 19 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Sep = __webpack_require__(2);

var Code = function (_Sep) {
    _inherits(Code, _Sep);

    function Code(value) {
        _classCallCheck(this, Code);

        return _possibleConstructorReturn(this, (Code.__proto__ || Object.getPrototypeOf(Code)).call(this, value));
    }

    return Code;
}(Sep);

Code.MATCH = /^({{|}})/;

module.exports = Code;

/***/ })
/******/ ]);